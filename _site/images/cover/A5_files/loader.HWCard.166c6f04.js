(window.webpackJsonp=window.webpackJsonp||[]).push([[179],{TzCa:function(e,t,a){"use strict";a.d(t,"a",(function(){return o}));var r=a("ERkP"),n=a("zb92"),i=Object(n.a)({loader:function(){return a.e(181).then(a.bind(null,"tpds"))},renderPlaceholder:function(){return null}});function o(e){return r.createElement(i,{player:e})}},"aX4+":function(e,t,a){"use strict";a.r(t),a.d(t,"HWCard",(function(){return Le}));var r=a("LdEA"),n=a.n(r),i=a("97Jx"),o=a.n(i),c=(a("PN9k"),a("yIC7"),a("1Pcy")),d=a.n(c),s=a("W/Kd"),u=a.n(s),l=a("KEM+"),_=a.n(l),p=a("ERkP"),m=a("bU1N"),v=a("SMZj"),f=a("Tb0w"),b=a("6rlp"),g=a("vjRr"),y=a("rxPX"),h=a("0KEI"),w=a("P1r1"),I=a("oEOe"),C=a("/kEJ"),T=I.a("rweb/cards",""),S=function(e,t){return function(a,r,n){var i=n.api;return I.b(a,{params:{ids:[t]},request:i.Broadcasts.fetchBroadcast})({actionTypes:T,context:"FETCH_BROADCAST",meta:{}},(function(t){if(t){var a,n=t.result.broadcasts[0],i=t.entities.broadcasts[n],o=g.a.select(r(),e);if(!o)return[];var c=E(i,o);return[Object(C.b)({cards:(a={},a[e]=Object.assign({},c),a)})]}}))}},E=function(e,t){var a=e.pre_live_slate_url,r=e.scheduled_start_ms,n=e.state,i=e.status,o=e.twitter_user_id,c=e.user_display_name,d=t.hw_card_binding_values;return{hw_card_binding_values:Object.assign({},d,{broadcast_state:{type:"STRING",string_value:n},broadcast_title:{type:"STRING",string_value:i},site:{type:"USER",user_value:{id_str:o}},broadcaster_display_name:{type:"STRING",string_value:c},broadcast_scheduled_start_time:{type:"STRING",string_value:r}},a?{broadcast_pre_live_slate:{type:"IMAGE",image_value:{url:a}}}:null)}},O=function(e,t){return t.cardState||f.b(e,t.card.url)},x=function(e,t){return t.card.binding_values.broadcast_id&&"STRING"===t.card.binding_values.broadcast_id.type?t.card.binding_values.broadcast_id.string_value:void 0},R=Object(y.a)().propsFromState((function(){return{cardState:O,isDataSaverEnabled:w.i,broadcastId:x}})).propsFromActions((function(){return{createLocalApiErrorHandler:Object(h.d)("CARD_CONTAINER"),requestCardUpdate:g.a.fetchOne,log:b.a,updateBroadcastCard:S,vote:g.a.vote,remindMeButtonSubscribe:g.a.eventSubscribe,remindMeButtonUnsubscribe:g.a.eventUnsubscribe}})).withAnalytics({element:"platform_card"}),j=a("TrHT"),L=a("wrlS"),k=function(e,t,a,r){switch(e){case"card_url_click":return{event:"card_url_click"};case"install_app":return{event:"install_app"};case"dm_button_click":return{event:"card_url_click",engagement_metadata:JSON.stringify({direct_message_card_details:{button_index:a}})};case"convo_button_click":return{event:"card_click",engagement_metadata:JSON.stringify({conversational_card_details:{button_index:a}})};case"poll_card_vote":return{event:"poll_card_vote"};case"unified_card_component_url_click":return Object.assign({event:"unified_card",uc_event:JSON.stringify({event:"click",component:t,destination:"browser"})},"button_group"===t||r?{engagement_metadata:JSON.stringify(Object.assign({uc_button_group_details:{button_index:a}},r?{uc_event_metadata:r}:null))}:null);case"unified_card_component_app_store_click":return{event:"unified_card",uc_event:JSON.stringify({event:"click",component:"details"===t?"app_store_details":t,destination:"app_store"}),engagement_metadata:JSON.stringify({uc_event_metadata:Object.assign({},r,{app_event:"install_app"},"button_group"===t?{button_index:a}:null)})};case"unified_card_carousel_swipe_next":case"unified_card_carousel_swipe_previous":return{event:"unified_card",uc_event:JSON.stringify({event:"unified_card_carousel_swipe_next"===e?"swipe_next":"swipe_previous",component:t}),engagement_metadata:JSON.stringify({uc_event_metadata:r})};default:return null}},A=a("3XMw"),M=a.n(A),N=a("Zb1g"),P=a("nT9l"),U=a("aITJ"),F=a("TIdA"),B=a("Jd6J"),J=a("A91F"),q=a("t62R"),D=!1,H=M.a.fb79efe3,V=M.a.daeffc96,X=M.a.a0fdf14a,G=M.a.aff03b01,W=M.a.g66535d9,z=M.a.bc305387,K=M.a.f71cfb85,Z=M.a.b1ac5af7,Y=M.a.e2ad5ae4,Q=M.a.j7f394d9,$=M.a.fba9ea70,ee=M.a.b79ffef4,te=M.a.i7c776d5,ae=M.a.fc209bb7,re=U.a.isIOS()?"ios":U.a.isAndroid()?"android":"other",ne={},ie=function(e){return function(t,a,r){var n=0===t.indexOf("card://"),i=a||!n?""+(a||"")+(a&&!n?" ":"")+(n?"":t):null;e.push(Object.assign({pathname:"/compose/tweet"},i?{query:{text:i}}:null,{state:{convoCardData:{cardId:t,cardUrl:n?t:null,nextState:r}}}))}};function oe(e){var t,a;D||(D=!0,B.b.init((t=e,a=t.history,[{composeDirectMessage:function(e){var t=e.recipient,r=e.welcomeMessageId,n=e.messageText,i={recipient_id:t};r&&(i.welcome_message_id=r),n&&(i.text=n),a.push({pathname:"/messages/compose",query:Object.assign({},i)})},composeTweet:ie(a),getFetchIntervalSeconds:function(){return 30},getCtaString:function(e){switch(e){case"play":return H;case"shop":return V;case"book":return X;case"connect":return G;case"order":return W;case"open":return z;case"install":default:return K}},getMessageMeString:function(e){switch(e){case"message_me_card_cta_1":return Z;case"message_me_card_cta_3":return Q;case"message_me_card_cta_4":return $;case"message_me_card_cta_2":default:return Y}},getMobileOS:function(){return re},renderImage:function(e,t,a,r,n,i){var o=e.uri,c=e.width,d=e.height,s=r?function(e){if(ne[e])return ne[e];var t=F.a.createLayoutCache();return ne[e]=t,t}(r):void 0,u=function(e){var a=e.useMinimumData;return p.createElement(F.a,{accessibilityLabel:i,aspectMode:J.a.exact(t||1),cropCandidates:n,image:{url:o,width:c||1e3,height:d||1e3},layoutCache:s,previewMode:a})};return"preview"===a?p.createElement(P.a,{acceptLabel:te,renderContent:u,resourceId:o}):u({useMinimumData:!1})},renderTwemojiText:function(e){return p.createElement(q.c,null,e)},renderNumVotesLabel:function(e){return N.d({count:e,formattedCount:N.c(e)})},renderFinalResultsLabel:function(){return N.a},renderTimeLeftLabel:function(e){return N.b(e)},renderStartingTimeLabel:function(e){var t=new Date(parseInt(e,10));return ee({date:ae(t)})}}])[0]))}var ce=a("v6aA"),de=a("TzCa"),se=a("cFuS"),ue=a("Rp9C"),le=a("Jkc4"),_e=a("XOJV"),pe=function(e,t){return t.media_tweet_id},me=function(e,t){var a=pe(0,t);return a?_e.a.selectFetchStatus(e,a):void 0},ve=Object(y.a)().propsFromState((function(){return{videoTweetFetchStatus:me,videoTweet:_e.a.createHydratedTweetSelector(pe)}})).propsFromActions((function(){return{createLocalApiErrorHandler:Object(h.d)("EVENT_CARD_CONTEXT"),fetchTweetIfNeeded:_e.a.fetchOneIfNeeded}})),fe=a("v//M"),be=a("W5XZ"),ge=a("fUT7"),ye=a("Modb"),he=a("lklz"),we=a("3xO4"),Ie=a.n(we),Ce=a("9Xij"),Te=a("rHpw"),Se=M.a.f0a19192,Ee=ve(function(e){function t(){for(var t,a=arguments.length,r=new Array(a),n=0;n<a;n++)r[n]=arguments[n];return t=e.call.apply(e,[this].concat(r))||this,_()(d()(t),"_renderInlinePlayer",(function(){var e,a=t.props,r=a.aspect_ratio,n=a.event_id,i=a.media_tweet_id,c=a.poster_image,d=a.promotedContent,s=a.videoTweet,u=null==s||null===(e=s.extended_entities)||void 0===e?void 0:e.media[0],l=he.b.forTweet(i);return u?p.createElement(ye.a,o()({},Object(j.a)(l,u,n),{aspectRatio:r,poster:c,promotedContent:d})):null})),_()(d()(t),"_handleFetchTweet",(function(){var e=t.props,a=e.createLocalApiErrorHandler,r=e.fetchTweetIfNeeded,n=e.media_tweet_id;ge.a.preload(),r(n).catch(a(be.a))})),t}u()(t,e);var a=t.prototype;return a.componentDidMount=function(){this._handleFetchTweet()},a.render=function(){var e=this.props,t=e.aspect_ratio,a=e.media_tweet_id,r=e.videoTweetFetchStatus;return a?p.createElement(Ce.a,{ratio:t},p.createElement(Ie.a,{style:Te.a.absoluteFill},p.createElement(fe.a,{accessibilityLabel:Se,fetchStatus:r,onRequestRetry:this._handleFetchTweet,render:this._renderInlinePlayer}))):null},t}(p.Component)),Oe=a("TnY3"),xe=U.a.isTwitterLiteAPK(),Re=M.a.j67b44cd,je={objectFitVideo:"cover"},Le=function(e){function t(t,a){var r;return r=e.call(this,t,a)||this,_()(d()(r),"_getCardState",(function(){var e=r.props,t=e.cardState;return"player"===e.card.name&&xe?"static":t})),_()(d()(r),"_updateBroadcastCard",(function(e){var t=e[0],a=r.props,n=a.broadcastId,i=a.updateBroadcastCard,o=a.createLocalApiErrorHandler;n&&i(t,n).catch(o())})),_()(d()(r),"_handleRequestCardUpdate",(function(){var e=r.context.loggedInUserId,t=r.props,a=t.card,n=t.requestCardUpdate,i=t.createLocalApiErrorHandler;return a.name===v.c.TwitterBroadcast?r._updateBroadcastCard:e?function(e,t){var a=Object.assign({},t);n(e,a).catch(i())}:void 0})),_()(d()(r),"_handlePromotedLogEvent",(function(e){var t=e.action,a=e.componentType,n=e.buttonIndex,i=e.isAuthRequired,o=e.ucPromotedMetadata,c=r.props,d=c.createLocalApiErrorHandler,s=c.cardContext,u=c.log,l=c.promotedContent,_=r.context.loggedInUserId;if((!i||_)&&l&&s){var p=l.disclosure_type,m=l.impression_id;u({disclosureType:p,itemId:s.tweetId,itemType:se.c.TWEET,params:Object.assign({impression_id:m},k(t,a,n,o))}).catch(d())}})),_()(d()(r),"_handleScribeEvent",(function(e){var t=e.action,a=e.componentType,n=e.cardName,i=e.cardUrl,o=e.ctaIndex,c=e.isMessageMe,d=e.isAuthRequired,s=r.props,u=s.analytics,l=s.cardContext,_=s.promotedContent,p=r.context.loggedInUserId,m="unified_card_app_store_open_link"===t?"open_link":t,v=_&&"earned"!==_.disclosure_type?_.impression_id:void 0;d&&!p||u.scribe({action:m,data:{items:[ue.a.getHWCardItem(Object.assign({componentType:a,cardName:n,cardUrl:i,ctaIndex:o,tweetId:l.tweetId,tweetUserId:l.tweetUserId},c?{viewingUserId:p}:null,{isUCAppInstall:"unified_card_app_store_open_link"===t,impressionId:v}))]}})})),_()(d()(r),"_handlePollVote",(function(e){var t=e.choice,a=e.cardId,n=r.props,i=n.cardContext.tweetId;(0,n.vote)(a,{selectedIndex:t,tweetId:i})})),_()(d()(r),"_handleEventReminderClick",(function(e){var t=e.cardId,a=e.eventId,n=e.notificationId,i=e.remindMe,o=r.props,c=o.remindMeButtonSubscribe,d=o.remindMeButtonUnsubscribe;i?c(t,a,{remind_me:i,notification_id:n}):d(t,a,{remind_me:i,notification_id:n})})),_()(d()(r),"_renderVideoPlayer",(function(e,t,a){var i=r.props,c=i.cardContext.tweetId,d=i.promotedContent,s=(d||{}).impression_id;if("live_broadcast"===e.type){var u=e.broadcast_id,l=e.aspect_ratio,_=e.content_id,m=e.poster_image,v=e.timecode;return p.createElement(ye.a,{accessibilityLabel:Re,aspectRatio:a||l,customOverlay:de.a,displayOptions:je,forceFullPreviewImage:"suboptimal"===t,poster:m,promotedContent:d,source:{contentId:_,videoId:he.b.forBroadcast(u,c,s)},timecode:v,videoType:"video"})}if("tweet_video"===e.type)return p.createElement(Ee,o()({},e,{promotedContent:L.a.isTrue("live_event_vod_promoted_content_enabled")?d:void 0}));if("uc_video"===e.type){e.type;var f=e.original_info,b=n()(e,["type","original_info"]),g=Object(j.a)(he.b.forTweet(c,s),Object.assign({},b,{original_info:Object.assign({},f),type:"video"})),y=(g.accessibilityLabel,g.backgroundColor,g.primaryLabel,g.secondaryLabel,n()(g,["accessibilityLabel","backgroundColor","primaryLabel","secondaryLabel"]));return a&&(y.aspectRatio=a),p.createElement(ye.a,o()({forceFullPreviewImage:"suboptimal"===t},y,{accessibilityLabel:Re,promotedContent:d}))}var h=e.aspect_ratio,w=e.content_id,I=e.duration_ms,C=e.poster_image,T=e.variants,S=e.vmap_url,E=T&&T.filter((function(e){return!!e.src}));return c?p.createElement(ye.a,{accessibilityLabel:Re,aspectRatio:a||h,durationMs:I,forceFullPreviewImage:"suboptimal"===t,poster:C,promotedContent:d,source:Object.assign({contentId:w},E&&E.length>0?{variants:E.map((function(e){return{content_type:e.type,url:e.src}}))}:null,{videoId:{type:"tweet",id:c},vmapUrl:S}),videoType:"vine"===e.type?"vine":"video"}):null})),oe({history:t.history}),r}return u()(t,e),t.prototype.render=function(){var e=this,t=this.props,a=t.dmSentOrReceived,r=t.isDataSaverEnabled,n=t.promotedContent,i=t.card,o=t.cardContext,c=t.isInteractive,d=t.withSquareBottomBorderRadius,s=L.a.isTrue("unified_cards_cta_color_blue_cta");return p.createElement(le.a,null,(function(t){return p.createElement(m.a,{card:i,cardContext:o,cardState:e._getCardState(),dmSentOrReceived:a,isDataSaverEnabled:r,isInteractive:c,isPromoted:!!n,onEventReminderClick:t(e._handleEventReminderClick),onPollVote:t(e._handlePollVote),onPromotedLogEvent:e._handlePromotedLogEvent,onScribeEvent:e._handleScribeEvent,promotedContent:n,renderVideoPlayer:e._renderVideoPlayer,requestCardUpdate:e._handleRequestCardUpdate(),useBlueButtonForAppDetails:s,withSquareBottomBorderRadius:d})}))},t}(p.Component);_()(Le,"contextType",ce.a);var ke=R(Object(Oe.a)(Le));t.default=ke}}]);
//# sourceMappingURL=https://ton.twitter.com/responsive-web-internal/sourcemaps/web/loader.HWCard.166c6f04.js.map